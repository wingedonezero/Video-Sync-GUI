[workspace]
name = "video-sync-gui"
version = "1.0.0"
description = "Video Sync GUI - Subtitle synchronization tool"
channels = ["conda-forge"]
platforms = ["linux-64"]

[tasks]
start = "python main.py"

[dependencies]
# Only Python from conda-forge - everything else from pip for latest versions
python = ">=3.13,<3.14"
pip = "*"

[pypi-dependencies]
# All project dependencies from PyPI for latest versions and Python 3.13 compatibility

# Core GUI Framework
PySide6 = "*"

# Scientific Computing & Analysis
numpy = "*"
scipy = "*"
scikit-learn = "*"

# Audio Analysis - REQUIRED for correlation, onset detection, DTW, spectrogram analysis
librosa = "*"
numba = ">=0.61.0"
llvmlite = ">=0.43.0"

# Subtitle Processing
pysubs2 = "*"

# Spell Checking
pyenchant = "*"

# XML Processing
lxml = "*"

# Video/Audio Processing
av = "*"

# Image Processing
Pillow = "*"

# Frame/Video Timing
VideoTimestamps = "*"

# Frame Matching & Scene Detection
imagehash = "*"
opencv-python = "*"
ffms2 = "*"
scenedetect = { version = "*", extras = ["opencv"] }

# Voice Activity Detection
webrtcvad-wheels = "*"

# Optional features - install separately if needed:
# VapourSynth (requires system libvapoursynth):
#   sudo pacman -S vapoursynth  # Install system package first
#   pixi install -e vapoursynth
# AI audio separation:
#   pixi install -e ai-rocm     # For AMD GPU
#   pixi install -e ai-nvidia   # For NVIDIA GPU
#   pixi install -e ai-cpu      # For CPU only

[feature.vapoursynth.pypi-dependencies]
# High-performance frame indexing (requires system VapourSynth library)
# Note: Fails if project path contains spaces - use system package instead
VapourSynth = "*"

[feature.ai-rocm.pypi-dependencies]
# AI audio separation for AMD GPUs with ROCm
torch = "*"
demucs = "*"

[feature.ai-nvidia.pypi-dependencies]
# AI audio separation for NVIDIA GPUs with CUDA
torch = "*"
demucs = "*"

[feature.ai-cpu.pypi-dependencies]
# AI audio separation CPU-only
torch = "*"
demucs = "*"

[environments]
# Each environment is independent - optional features won't interfere with default install
vapoursynth = { features = ["vapoursynth"] }
ai-rocm = { features = ["ai-rocm"] }
ai-nvidia = { features = ["ai-nvidia"] }
ai-cpu = { features = ["ai-cpu"] }
